<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Title: MOST important for Google -->
  <title>Live HTML Editor - Edit HTML in Real Time Online</title>
  
  <!-- Description: Will appear in search results -->
  <meta name="description" content="Free live HTML editor - instantly write, edit, and preview HTML code in your browser. No signup required. Perfect for web developers and learners.">
  
  <!-- Keywords: Not as important now, but still useful -->
  <meta name="keywords" content="live html editor, online html editor, real time html preview, html playground, html editor online">
  
  <!-- Open Graph (for social sharing) -->
  <meta property="og:title" content="Live HTML Editor - Edit HTML in Real Time">
  <meta property="og:description" content="Free online HTML editor with live preview. Start coding instantly.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://zalanlykos.github.io/live-html-editor/">
  <meta property="og:image" content="https://zalanlykos.github.io/live-html-editor/thumbnail.png">
  
  <!-- Structured Data for Google -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Live HTML Editor",
    "url": "https://zalanlykos.github.io/live-html-editor/",
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Any",
    "description": "Free online HTML editor with live preview. Start coding instantly.",
    "author": {
      "@type": "Person",
      "name": "Zalan Lykos"
    }
  }
  </script>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Live HTML Editor</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: background-color 0.3s, color 0.3s;
    user-select: none;
    overflow: hidden;
  }

  body.light {
    background-color: #f5f7fa;
    color: #222;
  }
  body.dark {
    background-color: #181a1f;
    color: #ddd;
  }

  #app {
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  /* Editor container */
  #left-panel {
    width: 50%;
    display: flex;
    flex-direction: column;
    background: var(--editor-bg);
    border-right: none;
    transition: background 0.3s;
  }

  /* Toolbar */
  #toolbar {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding: 0.5rem 1rem;
    background: var(--toolbar-bg);
    border-bottom: 1px solid var(--divider-color);
  }

  #toolbar button {
    background: var(--btn-bg);
    color: var(--btn-color);
    border: none;
    padding: 0.4rem 1rem;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    box-shadow: var(--btn-shadow);
    transition: background-color 0.25s;
    user-select: none;
    margin-left: 0.5rem;
  }
  #toolbar button:first-child {
    margin-left: 0; /* No left margin on first button */
  }
  #toolbar button:hover {
    background: var(--btn-hover-bg);
  }
/* File submenu */
#fileSubmenu {
  display: none;
  position: absolute;
  top: 100%;          /* Position right below the button */
  left: 0;            /* Align left edge exactly with the button's left edge */
  margin-top: 4px;    /* Small gap for better visual */
  background: var(--toolbar-bg);
  border: 1px solid var(--divider-color);
  box-shadow: 0 0 10px 3px rgba(0, 120, 212, 0.6); /* Glow effect */
  z-index: 20;
  min-width: 160px;
  border-radius: 5px;
  transition: box-shadow 0.3s ease;
}

#fileSubmenu button {
  width: 100%;
  padding: 6px 12px;
  text-align: left;
  border: none;
  background: transparent;
  color: var(--btn-color);
  cursor: pointer;
  font-weight: 600;
  font-size: 14px;
  margin: 0; /* Ensure no margin that could offset */
  box-shadow: none; /* No glow on buttons */
}



#fileSubmenu button:hover {
  background: var(--btn-hover-bg);
}

#fileContainer.open #fileSubmenu {
  display: block;
}


  /* Positioning the file container relatively to toolbar */
  #fileContainer {
    position: relative;
    display: inline-block;
  }

  /* Code editor */
#editor-container {
  flex: 1;
  display: flex;
  height: 100%;
  overflow: hidden;
  background: var(--editor-bg);
  color: var(--editor-fg);
}

#lineNumbers {
  background: var(--editor-bg);
  color: #999;
  text-align: right;
  padding: 1rem 0.5rem 1rem 0.5rem;
  font-family: 'Source Code Pro', monospace;
  font-size: 15px;
  line-height: 1.4;
  user-select: none;
  overflow: hidden;
  width: 40px;
  border-right: 1px solid var(--divider-color);
}

#code {
  flex: 1;
  font-family: 'Source Code Pro', monospace;
  font-size: 15px;
  line-height: 1.4;
  padding: 1rem;
  outline: none;
  border: none;
  resize: none;
  background: var(--editor-bg);
  color: var(--editor-fg);
  overflow: auto;
  white-space: pre-wrap;
  tab-size: 2;
  line-break: normal;
}


  /* Resizable divider */
 /* Make divider wider to accommodate handle */
/* Update divider styling */
#divider {
  width: 5px;
  background: var(--divider-color);
  transition: background-color 0.3s;
  display: flex;
  flex-direction: column;
  align-items: center;
  user-select: none;
  cursor: default; /* default cursor except drag area */
  position: relative;
}

/* The new drag handle area at the top */
#drag-handle {
  width: 100%;
  height: 30px;
  cursor: col-resize;
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--divider-color);
  transition: background-color 0.3s;
  border-bottom: 1px solid var(--divider-hover);
}

#drag-handle:hover {
  background: var(--divider-hover);
}

/* The icon inside the drag handle */
#drag-handle span {
  font-family: monospace, monospace;
  font-weight: 700;
  color: var(--btn-color);
  user-select: none;
  font-size: 14px;
  pointer-events: none;
}

/* The rest of the divider below drag-handle should not respond to dragging */

  /* Preview container */
  #right-panel {
    flex: 1;
    background: var(--preview-bg);
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* Preview header */
#preview-header {
  padding: 0.5rem 1rem;
  background: var(--toolbar-bg);
  border-bottom: 1px solid var(--divider-color);
  font-weight: 600;
  font-size: 1.1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#preview-header button#inspectBtn {
  background: var(--btn-bg);
  color: var(--btn-color);
  border: none;
  padding: 0.3rem 0.8rem;
  border-radius: 5px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: var(--btn-shadow);
  transition: background-color 0.25s;
  user-select: none;
}

#preview-header button#inspectBtn:hover {
  background: var(--btn-hover-bg);
}


  /* Preview iframe */
  #preview {
    flex: 1;
    border: none;
    background: #fff;
    transition: background-color 0.3s;
    position: relative;
  }

  /* Footer branding bottom right */
  #branding {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: var(--toolbar-bg);
    color: var(--footer-color);
    text-align: center;
    padding: 4px 0;
    font-size: 12px;
    user-select: none;
    box-shadow: 0 -1px 3px rgba(0,0,0,0.1);
  }
  #branding a {
    color: var(--footer-link);
    text-decoration: none;
    font-weight: 600;
  }
  #branding a:hover {
    text-decoration: underline;
  }

  /* Themes variables */
  body.light {
    --editor-bg: #ffffff;
    --editor-fg: #222222;
    --preview-bg: #fefefe;
    --toolbar-bg: #eaeef3;
    --btn-bg: #0078d4;
    --btn-color: white;
    --btn-hover-bg: #005a9e;
    --btn-shadow: 0 2px 6px rgba(0,120,212,0.4);
    --divider-color: #ddd;
    --divider-hover: #999;
    --footer-color: #555;
    --footer-link: #0078d4;
  }
  body.dark {
    --editor-bg: #22242a;
    --editor-fg: #eee;
    --preview-bg: #1e2026;
    --toolbar-bg: #2a2d35;
    --btn-bg: #4a90e2;
    --btn-color: white;
    --btn-hover-bg: #357ABD;
    --btn-shadow: 0 2px 8px rgba(74,144,226,0.7);
    --divider-color: #444;
    --divider-hover: #777;
    --footer-color: #aaa;
    --footer-link: #4a90e2;
  }

  /* Preferences modal */
  #prefsModal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--toolbar-bg);
    border: 1px solid var(--divider-color);
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    padding: 1rem 1.5rem;
    z-index: 200;
    width: 300px;
    border-radius: 8px;
  }
  #prefsModal.show {
    display: block;
  }
  #prefsModal h2 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-weight: 700;
    font-size: 1.25rem;
  }
  #prefsModal label {
    display: flex;
    align-items: center;
    margin-bottom: 0.75rem;
    cursor: pointer;
    user-select: none;
  }
  #prefsModal input[type="radio"] {
    margin-right: 0.75rem;
  }
  #prefsModal button {
    background: var(--btn-bg);
    color: var(--btn-color);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    float: right;
    margin-top: 1rem;
    box-shadow: var(--btn-shadow);
  }
  #prefsModal button:hover {
    background: var(--btn-hover-bg);
  }

  /* Overlay for modal */
  #overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 150;
  }
  #overlay.show {
    display: block;
  }
</style>
</head>
<body class="light">
<div id="app">
  <div id="left-panel">
    <div id="toolbar" role="toolbar" aria-label="Editor Toolbar">
      <div id="fileContainer">
        <button id="fileBtn" aria-haspopup="true" aria-expanded="false" aria-controls="fileSubmenu">File â–¼</button>
        <div id="fileSubmenu" role="menu" aria-label="File menu">
          <button id="newBtn" role="menuitem">New</button>
          <button id="openBtn" role="menuitem">Open...</button>
          <button id="saveBtn" role="menuitem">Save</button>
          <button id="saveAsBtn" role="menuitem">Save As...</button>
        </div>
      </div>
      <button id="themeBtn" aria-pressed="false" aria-label="Toggle theme">Theme</button>
    </div>
    <div id="editor-container" style="display:flex; height:100%; overflow:hidden;">
    <div id="lineNumbers" aria-hidden="true"></div>
    <textarea id="code" spellcheck="false" aria-label="HTML code editor" autocomplete="off" autocorrect="off" autocapitalize="off" wrap="off">
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Cool Example</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: white;
  }
  .card {
    background: rgba(0, 0, 0, 0.3);
    padding: 2rem 3rem;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    text-align: center;
  }
  h1 {
    margin-bottom: 1rem;
  }
  button {
    background: #2575fc;
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 6px;
    font-weight: bold;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #6a11cb;
  }
  #message {
    margin-top: 1rem;
    font-style: italic;
  }
</style>
</head>
<body>
  <div class="card">
    <h1>Welcome to a Cool Page</h1>
    <p>Enjoy this simple gradient card example with a hover button.</p>
    <button id="myButton">Click Me</button>
    <div id="message"></div>
  </div>

  <script>
    const button = document.getElementById('myButton');
    const message = document.getElementById('message');

    button.addEventListener('click', () => {
      message.textContent = "I don't do anything :)";
    });
  </script>
</body>
</html>


</textarea>
</div>
  </div>
  <!-- Replace the divider div in your HTML with this: -->
<!-- Replace #divider div with this -->
<div id="divider" role="separator" aria-orientation="vertical" aria-label="Resize editor preview divider" tabindex="0">
  <div id="drag-handle" title="Drag to resize"><span>&lt;&gt;</span></div>
</div>


  <div id="right-panel">
    <div id="preview-header">Preview</div>

    <iframe id="preview" title="Live HTML preview"></iframe>
    </div>
  </div>
</div>
<div id="branding" aria-label="Branding">Live HTML Editor by <a href="https://zalanlykos.github.io" target="_blank" class="active">Zalan Lykos</a></div>

<!-- Preferences Modal -->
<div id="overlay"></div>
<div id="prefsModal" role="dialog" aria-modal="true" aria-labelledby="prefsTitle">
  <h2 id="prefsTitle">Preferences</h2>
  <form id="prefsForm">
    <label>
      <input type="radio" name="theme" value="light" /> Light Theme
    </label>
    <label>
      <input type="radio" name="theme" value="dark" /> Dark Theme
    </label>
    <button type="button" id="prefsCloseBtn">Close</button>
  </form>
</div>

<script>
(() => {
  const code = document.getElementById('code');
  const preview = document.getElementById('preview');
  const themeBtn = document.getElementById('themeBtn');
  const fileBtn = document.getElementById('fileBtn');
  const fileContainer = document.getElementById('fileContainer');
  const fileSubmenu = document.getElementById('fileSubmenu');
  const newBtn = document.getElementById('newBtn');
  const openBtn = document.getElementById('openBtn');
  const saveBtn = document.getElementById('saveBtn');
  const saveAsBtn = document.getElementById('saveAsBtn');
  const prefsModal = document.getElementById('prefsModal');
  const overlay = document.getElementById('overlay');
  const prefsCloseBtn = document.getElementById('prefsCloseBtn');
  const prefsForm = document.getElementById('prefsForm');

  // Initial setup
  let currentTheme = localStorage.getItem('theme') || 'light';
  document.body.className = currentTheme;
  updateThemeBtn();

  // Update preview iframe content
  function updatePreview() {
    const content = code.value;
    preview.srcdoc = content;
  }

  // Debounce updatePreview to avoid excessive updates
  let updateTimeout;
  code.addEventListener('input', () => {
    clearTimeout(updateTimeout);
    updateTimeout = setTimeout(updatePreview, 300);
  });

  // Initial preview render
  updatePreview();

  // Theme toggle button
  themeBtn.addEventListener('click', () => {
    currentTheme = currentTheme === 'light' ? 'dark' : 'light';
    document.body.className = currentTheme;
    localStorage.setItem('theme', currentTheme);
    updateThemeBtn();
  });
const textarea = document.getElementById('code');
const lineNumbers = document.getElementById('lineNumbers');

function updateLineNumbers() {
  // Check if textarea contains any non-whitespace characters
  if (textarea.value.trim() === '') {
    lineNumbers.textContent = ''; // No code, no numbers
    return;
  }

  const linesCount = textarea.value.split('\n').length;
  let lines = '';
  for (let i = 1; i <= linesCount; i++) {
    lines += i + '\n';
  }
  lineNumbers.textContent = lines;
}


function syncScroll() {
  lineNumbers.scrollTop = textarea.scrollTop;
}

// Initialize line numbers
updateLineNumbers();

// Event listeners
textarea.addEventListener('input', updateLineNumbers);
textarea.addEventListener('scroll', syncScroll);


  function updateThemeBtn() {
    themeBtn.setAttribute('aria-pressed', currentTheme === 'dark');
  }

  // File menu toggle
  fileBtn.addEventListener('click', () => {
    const expanded = fileBtn.getAttribute('aria-expanded') === 'true';
    fileBtn.setAttribute('aria-expanded', !expanded);
    fileContainer.classList.toggle('open');
  });

  // Close file menu if clicking outside
  document.addEventListener('click', (e) => {
    if (!fileContainer.contains(e.target)) {
      fileContainer.classList.remove('open');
      fileBtn.setAttribute('aria-expanded', false);
    }
  });

  // New file clears editor
  newBtn.addEventListener('click', () => {
    if(confirm('Clear the editor? Unsaved changes will be lost.')) {
      code.value = '';
      updatePreview();
      closeFileMenu();
    }
  });
// --- INSPECT ELEMENTS FEATURE ---

  // Add Inspect button dynamically in toolbar
const toolbar = document.getElementById('preview-header');
const inspectBtn = document.createElement('button');
inspectBtn.id = 'inspectBtn';
inspectBtn.textContent = 'Inspect Elements';
inspectBtn.setAttribute('aria-pressed', 'false');
inspectBtn.style.background = 'var(--btn-bg)';
toolbar.appendChild(inspectBtn);

let inspecting = false;
let highlightedLine = null; // Track last highlighted code line
let highlightTimeout = null;

// Utility: Clear any existing highlight in editor
function clearHighlight() {
  if (highlightedLine !== null) {
    const highlightedSpan = document.querySelector('.code-highlight');
    if (highlightedSpan) {
      highlightedSpan.classList.remove('code-highlight');
    }
    highlightedLine = null;
  }
}

// Utility: Highlight given line number in editor textarea
function highlightLine(lineNumber) {
  clearHighlight();

  const lines = code.value.split('\n');
  if (lineNumber < 1 || lineNumber > lines.length) return;

  let start = 0;
  for (let i = 0; i < lineNumber - 1; i++) {
    start += lines[i].length + 1; // +1 for newline
  }
  let end = start + lines[lineNumber - 1].length;

  code.focus();
  code.setSelectionRange(start, end);

  const lineHeight = parseInt(getComputedStyle(code).lineHeight);
  code.scrollTop = (lineNumber - 1) * lineHeight;

  highlightedLine = lineNumber;
}

function findLineForElement(element) {
  if (!element) return null;
  const html = element.outerHTML;
  const codeText = code.value;
  const index = codeText.indexOf(html);
  if (index === -1) {
    const tag = element.tagName.toLowerCase();
    const regex = new RegExp(`<${tag}[^>]*>`, 'i');
    const match = regex.exec(codeText);
    if (!match) return null;
    const idx = match.index;
    return codeText.slice(0, idx).split('\n').length;
  }
  return codeText.slice(0, index).split('\n').length;
}

function createHighlightBox() {
  const box = document.createElement('div');
  box.style.position = 'absolute';
  box.style.border = '2px solid #0078d4';
  box.style.backgroundColor = 'rgba(0, 120, 212, 0.2)';
  box.style.pointerEvents = 'none';
  box.style.zIndex = '9999';
  return box;
}

let highlightBox = null;

function onHoverPreview(e) {
  if (!inspecting) return;

  const doc = preview.contentDocument || preview.contentWindow.document;
  if (!highlightBox) {
    highlightBox = createHighlightBox();
    doc.body.appendChild(highlightBox);
  }

  const target = e.target;
  if (target === doc.body || target === highlightBox) {
    highlightBox.style.width = '0';
    highlightBox.style.height = '0';
    return;
  }

  const rect = target.getBoundingClientRect();
  highlightBox.style.top = rect.top + doc.defaultView.scrollY + 'px';
  highlightBox.style.left = rect.left + doc.defaultView.scrollX + 'px';
  highlightBox.style.width = rect.width + 'px';
  highlightBox.style.height = rect.height + 'px';
}

function onClickPreview(e) {
  if (!inspecting) return;

  e.preventDefault();
  e.stopPropagation();

  const line = findLineForElement(e.target);
  if (line) {
    highlightLine(line);
  }
}

// Inspect mode toggle handler with color toggle on button
inspectBtn.addEventListener('click', () => {
  inspecting = !inspecting;
  inspectBtn.setAttribute('aria-pressed', inspecting.toString());
  if (inspecting) {
    inspectBtn.style.background = 'red';  // Active = red
  } else {
    inspectBtn.style.background = 'var(--btn-bg)'; // Inactive = default
  }

  const doc = preview.contentDocument || preview.contentWindow.document;

  if (inspecting) {
    if (!highlightBox) {
      highlightBox = createHighlightBox();
    }
    if (!doc.body.contains(highlightBox)) {
      doc.body.appendChild(highlightBox);
    }

    doc.body.addEventListener('mousemove', onHoverPreview);
    doc.body.addEventListener('click', onClickPreview, true);

    preview.style.pointerEvents = 'auto';
    preview.style.cursor = 'crosshair';
  } else {
    if (highlightBox && highlightBox.parentNode) {
      highlightBox.parentNode.removeChild(highlightBox);
    }

    doc.body.removeEventListener('mousemove', onHoverPreview);
    doc.body.removeEventListener('click', onClickPreview, true);

    preview.style.pointerEvents = '';
    preview.style.cursor = '';

    clearHighlight();
  }
});



  function onHoverPreview(e) {
    e.preventDefault();
    const el = e.target;

    const doc = preview.contentDocument || preview.contentWindow.document;
    if (!highlightBox || !doc.body.contains(highlightBox)) return;

    if (el === doc.body || el === highlightBox) {
      highlightBox.style.width = '0';
      highlightBox.style.height = '0';
      return;
    }

    // Get element bounding rect relative to iframe viewport
    const rect = el.getBoundingClientRect();

    // Position highlight box over hovered element
    highlightBox.style.top = rect.top + 'px';
    highlightBox.style.left = rect.left + 'px';
    highlightBox.style.width = rect.width + 'px';
    highlightBox.style.height = rect.height + 'px';

    // Find corresponding line in code and highlight
    const line = findLineForElement(el);
    if (line !== null) {
      highlightLine(line);
    }
  }

  function onClickPreview(e) {
    e.preventDefault();
    e.stopPropagation();

    const el = e.target;
    if (!el) return;

    // Find corresponding line and keep highlight (do not clear)
    const line = findLineForElement(el);
    if (line !== null) {
      highlightLine(line);
    }

    // Exit inspect mode
    inspecting = false;
    inspectBtn.setAttribute('aria-pressed', 'false');
    inspectBtn.style.background = 'var(--btn-bg)';

    // Remove highlightBox and event listeners
    const doc = preview.contentDocument || preview.contentWindow.document;
    if (highlightBox && highlightBox.parentNode) {
      highlightBox.parentNode.removeChild(highlightBox);
    }
    doc.body.removeEventListener('mousemove', onHoverPreview);
    doc.body.removeEventListener('click', onClickPreview, true);

    preview.style.pointerEvents = '';
    preview.style.cursor = '';
  }


  // Open file input
  openBtn.addEventListener('click', () => {
    closeFileMenu();
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.html,.htm,.txt';
    input.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (ev) => {
          code.value = ev.target.result;
          updatePreview();
        };
        reader.readAsText(file);
      }
    };
    input.click();
  });

  // Save file with fixed name
  saveBtn.addEventListener('click', () => {
    closeFileMenu();
    const filename = 'code.html';
    saveTextFile(filename, code.value);
  });

  // Save As with prompt for filename and format
  saveAsBtn.addEventListener('click', () => {
    closeFileMenu();
    let filename = prompt('Enter filename (with extension):', 'code.html');
    if(filename) {
      saveTextFile(filename, code.value);
    }
  });

  function saveTextFile(filename, text) {
    const blob = new Blob([text], {type: 'text/html'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    a.click();
    URL.revokeObjectURL(a.href);
  }

  function closeFileMenu() {
    fileContainer.classList.remove('open');
    fileBtn.setAttribute('aria-expanded', false);
  }

  // Resizable divider
(() => {
  const divider = document.getElementById('divider');
  const dragHandle = document.getElementById('drag-handle');
  const leftPanel = document.getElementById('left-panel');
  const rightPanel = document.getElementById('right-panel');

  let isDragging = false;

  dragHandle.addEventListener('mousedown', (e) => {
    e.preventDefault();
    isDragging = true;
preview.style.pointerEvents = 'none';

  });



  window.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    // Calculate new width for left panel (50px minimum, 90% max)
    let newWidth = e.clientX;
    const minWidth = 50;
    const maxWidth = window.innerWidth * 0.9;
    if (newWidth < minWidth) newWidth = minWidth;
    if (newWidth > maxWidth) newWidth = maxWidth;
    leftPanel.style.width = newWidth + 'px';
    // Right panel flex will adjust automatically
  });

  window.addEventListener('mouseup', () => {
    isDragging = false;
preview.style.pointerEvents = 'auto';

  });

})();



  // Elements panel
  const elementsHeader = document.getElementById('elements-header');
  const elementsList = document.getElementById('elements-list');
  let elementsExpanded = true;

  // Common HTML elements to insert
  const htmlElements = ['div', 'span', 'p', 'a', 'ul', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'table', 'tr', 'td', 'th', 'button', 'input', 'form', 'img', 'section', 'article', 'header', 'footer', 'nav', 'main', 'aside'];

  // Populate elements list
  htmlElements.forEach(tag => {
    const btn = document.createElement('button');
    btn.textContent = `<${tag}>`;
    btn.setAttribute('aria-label', `Insert <${tag}> element`);
    btn.addEventListener('click', () => {
      insertAtCursor(`<${tag}></${tag}>`);
      code.focus();
      updatePreview();
    });
    elementsList.appendChild(btn);
  });

  elementsHeader.addEventListener('click', toggleElements);
  elementsHeader.addEventListener('keydown', e => {
    if(e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleElements();
    }
  });


  // Insert text at cursor in textarea
  function insertAtCursor(text) {
    const start = code.selectionStart;
    const end = code.selectionEnd;
    const before = code.value.substring(0, start);
    const after = code.value.substring(end);
    code.value = before + text + after;
    code.selectionStart = code.selectionEnd = start + text.length;
  }

  // Accessibility: focus management for file menu
  fileBtn.addEventListener('keydown', e => {
    if(e.key === 'ArrowDown') {
      e.preventDefault();
      openFileMenuFocusFirst();
    }
  });
  function openFileMenuFocusFirst() {
    fileContainer.classList.add('open');
    fileBtn.setAttribute('aria-expanded', true);
    const firstMenuItem = fileSubmenu.querySelector('button');
    if(firstMenuItem) firstMenuItem.focus();
  }

  // Preferences modal (can be extended in future)
  themeBtn.addEventListener('dblclick', openPrefs);
  prefsCloseBtn.addEventListener('click', closePrefs);
  overlay.addEventListener('click', closePrefs);

  function openPrefs() {
    prefsModal.classList.add('show');
    overlay.classList.add('show');
    // Set current theme radio checked
    const radios = prefsForm.elements['theme'];
    for(let r of radios) {
      r.checked = r.value === currentTheme;
    }
  }
  function closePrefs() {
    prefsModal.classList.remove('show');
    overlay.classList.remove('show');
  }

  prefsForm.addEventListener('change', e => {
    if(e.target.name === 'theme') {
      currentTheme = e.target.value;
      document.body.className = currentTheme;
      localStorage.setItem('theme', currentTheme);
      updateThemeBtn();
    }
  });

})();
</script>
</body>
</html>

